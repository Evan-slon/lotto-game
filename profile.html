<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LUCKY JETTON - –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</title>
    <!-- Telegram Web App SDK -->
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #0088cc;
            --primary-dark: #006699;
            --secondary: #ff6b35;
            --background: #0f1b2b;
            --surface: #1a2b3e;
            --text: #ffffff;
            --text-secondary: #a0b3c6;
            --success: #4CAF50;
            --warning: #FF9800;
            --error: #f44336;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--background);
            color: var(--text);
            min-height: 100vh;
            line-height: 1.6;
            padding-bottom: 80px;
        }

        .container {
            max-width: 400px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 20px;
            padding: 15px 0;
        }

        .header h1 {
            font-size: 1.5rem;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 5px;
        }

        /* –ù–∞–≤–∏–≥–∞—Ü–∏—è */
        .navigation {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--surface);
            border-top: 1px solid rgba(255,255,255,0.1);
            display: flex;
            padding: 10px 0;
            z-index: 1000;
        }

        .nav-item {
            flex: 1;
            text-align: center;
            padding: 10px 5px;
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.8rem;
            transition: all 0.3s ease;
        }

        .nav-item.active {
            color: var(--primary);
        }

        .nav-item i {
            display: block;
            font-size: 1.2rem;
            margin-bottom: 5px;
        }

        /* –í–µ—Ä—Ö–Ω—è—è —Å—Ç—Ä–æ–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è */
        .profile-header {
            background: var(--surface);
            border-radius: 15px;
            padding: 15px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
            flex: 1;
        }

        .user-avatar {
            width: 50px;
            height: 50px;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .user-details h3 {
            font-size: 1.1rem;
            margin-bottom: 2px;
        }

        .user-details p {
            color: var(--text-secondary);
            font-size: 0.8rem;
        }

        .stats-row {
            display: flex;
            gap: 15px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 1.3rem;
            font-weight: bold;
            margin-bottom: 2px;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.7rem;
        }

        /* –ü–∞–≥–∏–Ω–∞—Ü–∏—è —Ä–∞–∑–¥–µ–ª–æ–≤ */
        .section-nav {
            display: flex;
            background: var(--surface);
            border-radius: 15px;
            padding: 5px;
            margin-bottom: 20px;
            gap: 5px;
        }

        .section-btn {
            flex: 1;
            padding: 12px 5px;
            border: none;
            background: transparent;
            color: var(--text-secondary);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 0.9rem;
            font-weight: bold;
        }

        .section-btn.active {
            background: var(--primary);
            color: white;
        }

        .section-btn:hover:not(.active) {
            background: rgba(255,255,255,0.1);
        }

        /* –†–∞–∑–¥–µ–ª—ã –∫–æ–Ω—Ç–µ–Ω—Ç–∞ */
        .content-section {
            display: none;
        }

        .content-section.active {
            display: block;
            animation: fadeIn 0.3s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* –†–∞–∑–¥–µ–ª –ö–æ—à–µ–ª–µ–∫ */
        .wallet-card {
            background: var(--surface);
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 15px;
            text-align: center;
        }

        .wallet-icon {
            font-size: 3rem;
            margin-bottom: 15px;
        }

        .wallet-balance {
            font-size: 2rem;
            font-weight: bold;
            color: var(--secondary);
            margin-bottom: 5px;
        }

        .wallet-address {
            background: var(--background);
            padding: 10px 15px;
            border-radius: 10px;
            margin: 15px 0;
            font-family: monospace;
            font-size: 0.8rem;
            word-break: break-all;
        }

        .wallet-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .btn {
            flex: 1;
            padding: 15px;
            border: none;
            border-radius: 12px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .btn-primary {
            background: linear-gradient(45deg, var(--primary), var(--primary-dark));
            color: white;
        }

        .btn-secondary {
            background: transparent;
            border: 2px solid var(--primary);
            color: var(--primary);
        }

        .btn-wallet {
            background: linear-gradient(45deg, #0088cc, #0095ff);
            color: white;
            width: 100%;
            margin-top: 15px;
        }

        .btn:hover {
            transform: scale(1.02);
        }

        .btn-primary:hover {
            box-shadow: 0 5px 15px rgba(0, 136, 204, 0.4);
        }

        .btn-secondary:hover {
            background: var(--primary);
            color: white;
        }

        .btn-wallet:hover {
            box-shadow: 0 5px 15px rgba(0, 136, 204, 0.4);
        }

        /* –†–∞–∑–¥–µ–ª –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: var(--surface);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
        }

        .stat-card .stat-icon {
            font-size: 1.5rem;
            margin-bottom: 10px;
        }

        .stat-card .stat-value {
            font-size: 1.4rem;
            margin-bottom: 5px;
        }

        .stat-card .stat-label {
            font-size: 0.8rem;
        }

        /* –ú–æ–∏ –±–∏–ª–µ—Ç—ã */
        .my-tickets-section {
            background: var(--surface);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .tickets-pool {
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .tickets-pool:last-child {
            border-bottom: none;
            margin-bottom: 0;
        }

        .pool-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .pool-title {
            font-size: 1.1rem;
            font-weight: bold;
            color: var(--primary);
        }

        .ticket-count {
            background: var(--primary);
            color: white;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .tickets-list {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }

        .my-ticket {
            background: var(--background);
            border: 2px solid var(--primary);
            color: var(--text);
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .transactions-list {
            background: var(--surface);
            border-radius: 15px;
            padding: 20px;
        }

        .section-title {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 15px;
        }

        .transaction-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .transaction-item:last-child {
            border-bottom: none;
        }

        .transaction-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .transaction-icon {
            width: 40px;
            height: 40px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .icon-buy {
            background: rgba(0, 136, 204, 0.2);
            color: var(--primary);
        }

        .icon-win {
            background: rgba(76, 175, 80, 0.2);
            color: var(--success);
        }

        .icon-deposit {
            background: rgba(255, 152, 0, 0.2);
            color: var(--warning);
        }

        .icon-withdraw {
            background: rgba(244, 67, 54, 0.2);
            color: var(--error);
        }

        .transaction-details h4 {
            font-size: 1rem;
            margin-bottom: 2px;
        }

        .transaction-details p {
            color: var(--text-secondary);
            font-size: 0.8rem;
        }

        .transaction-amount {
            font-weight: bold;
            font-size: 1.1rem;
        }

        .amount-positive {
            color: var(--success);
        }

        .amount-negative {
            color: var(--error);
        }

        /* –†–∞–∑–¥–µ–ª –†–µ–π—Ç–∏–Ω–≥ */
        .rating-list {
            background: var(--surface);
            border-radius: 15px;
            padding: 20px;
        }

        .rating-item {
            display: flex;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255,255,255,0.1);
        }

        .rating-item:last-child {
            border-bottom: none;
        }

        .rating-position {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: var(--background);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 15px;
            font-size: 0.9rem;
        }

        .position-1 {
            background: linear-gradient(45deg, #FFD700, #FFA500);
            color: #000;
        }

        .position-2 {
            background: linear-gradient(45deg, #C0C0C0, #A0A0A0);
            color: #000;
        }

        .position-3 {
            background: linear-gradient(45deg, #CD7F32, #A0522D);
            color: #000;
        }

        .rating-avatar {
            width: 35px;
            height: 35px;
            border-radius: 50%;
            background: var(--primary);
            margin-right: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.8rem;
            font-weight: bold;
        }

        .rating-info {
            flex: 1;
        }

        .rating-name {
            font-weight: bold;
            margin-bottom: 2px;
        }

        .rating-stats {
            color: var(--text-secondary);
            font-size: 0.8rem;
        }

        .rating-amount {
            font-weight: bold;
            color: var(--secondary);
        }

        /* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            z-index: 2000;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: var(--surface);
            border-radius: 20px;
            padding: 25px;
            width: 100%;
            max-width: 350px;
            animation: modalSlide 0.3s ease;
        }

        @keyframes modalSlide {
            from { transform: scale(0.8); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        .modal h3 {
            margin-bottom: 15px;
            text-align: center;
            font-size: 1.3rem;
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            margin-bottom: 5px;
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .input-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid rgba(255,255,255,0.1);
            background: var(--background);
            border-radius: 10px;
            color: var(--text);
            font-size: 1rem;
        }

        .input-group input:focus {
            border-color: var(--primary);
            outline: none;
        }

        .modal-actions {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        /* –ü—É—Å—Ç–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ */
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: var(--text-secondary);
        }

        .empty-icon {
            font-size: 3rem;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        /* –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å */
        @media (max-width: 480px) {
            .container {
                padding: 15px;
            }
            
            .profile-header {
                padding: 12px;
            }
            
            .user-avatar {
                width: 45px;
                height: 45px;
            }
            
            .stats-row {
                gap: 10px;
            }
            
            .stat-value {
                font-size: 1.1rem;
            }
            
            .tickets-list {
                gap: 6px;
            }
            
            .my-ticket {
                padding: 4px 10px;
                font-size: 0.75rem;
            }
        }
    </style>
</head>
<body>

<!-- –ö–Ω–æ–ø–∫–∞ –≤–æ–∑–≤—Ä–∞—Ç–∞ –¥–ª—è Telegram -->
<button class="back-btn" onclick="goBack()" style="position: fixed; top: 15px; left: 15px; background: rgba(255,255,255,0.1); border: none; border-radius: 50%; width: 40px; height: 40px; color: white; font-size: 18px; cursor: pointer; z-index: 1001;">‚Üê</button>

    <div class="container">
        <!-- –®–∞–ø–∫–∞ -->
        <div class="header">
            <h1>üé∞ LUCKY JETTON</h1>
            <p>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</p>
        </div>

        <!-- –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç -->
        <div id="profilePage">
            <!-- –í–µ—Ä—Ö–Ω—è—è —Å—Ç—Ä–æ–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è -->
            <div class="profile-header">
                <div class="user-info">
                    <div class="user-avatar" id="userAvatar">üë§</div>
                    <div class="user-details">
                        <h3 id="userName">–ì–æ—Å—Ç—å</h3>
                        <p>ID: <span id="userId">123456</span></p>
                    </div>
                </div>
                <div class="stats-row">
                    <div class="stat-item">
                        <div class="stat-value" id="gamesPlayed">0</div>
                        <div class="stat-label">–ò–≥—Ä—ã</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value" id="walletBalance">0</div>
                        <div class="stat-label">TON</div>
                    </div>
                </div>
            </div>

            <!-- –ü–∞–≥–∏–Ω–∞—Ü–∏—è —Ä–∞–∑–¥–µ–ª–æ–≤ -->
            <div class="section-nav">
                <button class="section-btn active" onclick="showSection('wallet')">üëõ –ö–æ—à–µ–ª–µ–∫</button>
                <button class="section-btn" onclick="showSection('stats')">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞</button>
                <button class="section-btn" onclick="showSection('tickets')">üé´ –ú–æ–∏ –±–∏–ª–µ—Ç—ã</button>
                <button class="section-btn" onclick="showSection('rating')">üèÜ –†–µ–π—Ç–∏–Ω–≥</button>
            </div>

            <!-- –†–∞–∑–¥–µ–ª –ö–æ—à–µ–ª–µ–∫ -->
            <div id="walletSection" class="content-section active">
                <div class="wallet-card">
                    <div class="wallet-icon">üëõ</div>
                    <div class="wallet-balance" id="walletBalanceBig">0 TON</div>
                    <div>–ë–∞–ª–∞–Ω—Å –∫–æ—à–µ–ª—å–∫–∞</div>
                    
                    <!-- –ö–Ω–æ–ø–∫–∞ –ø—Ä–∏–≤—è–∑–∫–∏ –∫–æ—à–µ–ª—å–∫–∞ —Ç–µ–ø–µ—Ä—å –≤—Å–µ–≥–¥–∞ –≤–∏–¥–Ω–∞ -->
                    <button class="btn btn-wallet" onclick="connectWallet()">üîó –ü—Ä–∏–≤—è–∑–∞—Ç—å TON Wallet</button>
                    
                    <div id="walletConnected" style="display: none;">
                        <div class="wallet-address" id="walletAddress">
                            –ö–æ—à–µ–ª–µ–∫ –Ω–µ –ø–æ–¥–∫–ª—é—á–µ–Ω
                        </div>
                        <!-- –ö–Ω–æ–ø–∫–∏ –≤—ã–≤–æ–¥–∞ –∏ –≤–Ω–µ—Å–µ–Ω–∏—è TON —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω—ã –Ω–∏–∂–µ -->
                        <div class="wallet-actions">
                            <button class="btn btn-primary" onclick="showDepositModal()">–í–Ω–µ—Å—Ç–∏ TON</button>
                            <button class="btn btn-secondary" onclick="showWithdrawModal()">–í—ã–≤–µ—Å—Ç–∏ TON</button>
                        </div>
                    </div>
                    
                    <div id="walletDisconnected" style="display: none;">
                        <p style="color: var(--text-secondary); margin: 20px 0; font-size: 0.9rem;">
                            –ü–æ–¥–∫–ª—é—á–∏—Ç–µ TON –∫–æ—à–µ–ª–µ–∫ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å—Ä–µ–¥—Å—Ç–≤–∞–º–∏
                        </p>
                    </div>
                </div>
            </div>

            <!-- –†–∞–∑–¥–µ–ª –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
            <div id="statsSection" class="content-section">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">üéÆ</div>
                        <div class="stat-value" id="totalGames">0</div>
                        <div class="stat-label">–°—ã–≥—Ä–∞–Ω–æ –∏–≥—Ä</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üí∏</div>
                        <div class="stat-value" id="totalSpent">0</div>
                        <div class="stat-label">–ü–æ—Ç—Ä–∞—á–µ–Ω–æ</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üèÜ</div>
                        <div class="stat-value" id="totalWon">0</div>
                        <div class="stat-label">–í—ã–∏–≥—Ä–∞–Ω–æ</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">üé´</div>
                        <div class="stat-value" id="totalTickets">0</div>
                        <div class="stat-label">–ë–∏–ª–µ—Ç–æ–≤</div>
                    </div>
                </div>

                <div class="transactions-list">
                    <div class="section-title">–ò—Å—Ç–æ—Ä–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π</div>
                    <div id="transactionsList">
                        <!-- –¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                    </div>
                </div>
            </div>

            <!-- –†–∞–∑–¥–µ–ª –ú–æ–∏ –±–∏–ª–µ—Ç—ã -->
            <div id="ticketsSection" class="content-section">
                <div class="my-tickets-section">
                    <div class="section-title">üé´ –ú–æ–∏ –±–∏–ª–µ—Ç—ã</div>
                    <div id="myTicketsList">
                        <!-- –ë–∏–ª–µ—Ç—ã –±—É–¥—É—Ç –∑–∞–≥—Ä—É–∂–µ–Ω—ã —á–µ—Ä–µ–∑ JavaScript -->
                    </div>
                </div>
            </div>

            <!-- –†–∞–∑–¥–µ–ª –†–µ–π—Ç–∏–Ω–≥ -->
            <div id="ratingSection" class="content-section">
                <div class="rating-list">
                    <div class="section-title">–¢–æ–ø –∏–≥—Ä–æ–∫–æ–≤</div>
                    <div id="ratingList">
                        <!-- –†–µ–π—Ç–∏–Ω–≥ –±—É–¥–µ—Ç –∑–∞–≥—Ä—É–∂–µ–Ω —á–µ—Ä–µ–∑ JavaScript -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤–Ω–µ—Å–µ–Ω–∏—è —Å—Ä–µ–¥—Å—Ç–≤ -->
    <div class="modal" id="depositModal">
        <div class="modal-content">
            <h3>–í–Ω–µ—Å—Ç–∏ TON</h3>
            <div class="input-group">
                <label>–°—É–º–º–∞ –¥–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è (TON)</label>
                <input type="number" id="depositAmount" placeholder="0.0" min="0.1" step="0.1">
            </div>
            <div style="background: var(--background); padding: 15px; border-radius: 10px; margin: 15px 0;">
                <div style="font-size: 0.9rem; color: var(--text-secondary); margin-bottom: 5px;">–ê–¥—Ä–µ—Å –¥–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è:</div>
                <div id="depositAddress" style="font-family: monospace; font-size: 0.8rem; word-break: break-all;"></div>
            </div>
            <div class="modal-actions">
                <button class="btn btn-secondary" onclick="hideDepositModal()" style="flex: 1;">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn btn-primary" onclick="confirmDeposit()" style="flex: 1;">–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –∞–¥—Ä–µ—Å</button>
            </div>
        </div>
    </div>

    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–≤–æ–¥–∞ —Å—Ä–µ–¥—Å—Ç–≤ -->
    <div class="modal" id="withdrawModal">
        <div class="modal-content">
            <h3>–í—ã–≤–µ—Å—Ç–∏ TON</h3>
            <div class="input-group">
                <label>–°—É–º–º–∞ –¥–ª—è –≤—ã–≤–æ–¥–∞ (TON)</label>
                <input type="number" id="withdrawAmount" placeholder="0.0" min="0.1" step="0.1">
            </div>
            <div class="input-group">
                <label>–ê–¥—Ä–µ—Å –∫–æ—à–µ–ª—å–∫–∞</label>
                <input type="text" id="withdrawAddress" placeholder="–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å TON –∫–æ—à–µ–ª—å–∫–∞">
            </div>
            <div style="color: var(--text-secondary); font-size: 0.8rem; margin: 10px 0;">
                –î–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è –≤—ã–≤–æ–¥–∞: <span id="availableBalance" style="color: var(--secondary); font-weight: bold;">0 TON</span>
            </div>
            <div class="modal-actions">
                <button class="btn btn-secondary" onclick="hideWithdrawModal()" style="flex: 1;">–û—Ç–º–µ–Ω–∞</button>
                <button class="btn btn-primary" onclick="confirmWithdraw()" style="flex: 1;">–í—ã–≤–µ—Å—Ç–∏</button>
            </div>
        </div>
    </div>

    <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
    <div class="navigation">
        <a href="index.html" class="nav-item">
            <i>üé∞</i>
            –ì–ª–∞–≤–Ω–∞—è
        </a>
 
        <a href="profile.html" class="nav-item active">
            <i>üë§</i>
            –ö–∞–±–∏–Ω–µ—Ç
        </a>
        <a href="rules.html" class="nav-item">
            <i>üìñ</i>
            –ü—Ä–∞–≤–∏–ª–∞
        </a>
        <a href="roadmap.html" class="nav-item">
            <i>üó∫Ô∏è</i>
            –ö–∞—Ä—Ç–∞
        </a>
    </div>
    <script>
        // Telegram Web App Integration
        const tg = window.Telegram.WebApp;
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö –≤ –±–æ—Ç
        function sendDataToBot(data) {
            if (tg && tg.sendData) {
                console.log('–û—Ç–ø—Ä–∞–≤–ª—è–µ–º –¥–∞–Ω–Ω—ã–µ –≤ –±–æ—Ç:', data);
                tg.sendData(JSON.stringify(data));
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è Web App
        function closeWebApp() {
            if (tg && tg.close) {
                tg.close();
            }
        }
        
        // –§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—Ç–∞
        function goBack() {
            if (tg && tg.BackButton) {
                closeWebApp();
            } else {
                window.location.href = 'index.html';
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram
        function initTelegram() {
            if (tg && tg.initData) {
                console.log('–ó–∞–ø—É—â–µ–Ω–æ –≤ Telegram Web App');
                
                // –†–∞—Å–∫—Ä—ã–≤–∞–µ–º –Ω–∞ –≤–µ—Å—å —ç–∫—Ä–∞–Ω
                tg.expand();
                
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫—É "–ù–∞–∑–∞–¥"
                tg.BackButton.show();
                tg.BackButton.onClick(closeWebApp);
                
                // –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram
                const telegramUser = tg.initDataUnsafe?.user;
                if (telegramUser) {
                    console.log('–î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram:', telegramUser);
                    
                    // –°–æ—Ö—Ä–∞–Ω—è–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                    const userData = {
                        id: telegramUser.id,
                        first_name: telegramUser.first_name,
                        username: telegramUser.username,
                        language_code: telegramUser.language_code,
                        is_premium: telegramUser.is_premium || false
                    };
                    localStorage.setItem('telegramUser', JSON.stringify(userData));
                    
                    // –û–±–Ω–æ–≤–ª—è–µ–º –ø—Ä–æ—Ñ–∏–ª—å –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ Telegram
                    updateProfileWithTelegramData(telegramUser);
                }
                
                // –ì–æ–≤–æ—Ä–∏–º Telegram, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ
                tg.ready();
                
                // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–±—ã—Ç–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø—Ä–æ—Ñ–∏–ª—è
                sendProfileViewEvent();
                
            } else {
                console.log('–ó–∞–ø—É—â–µ–Ω–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ');
            }
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ Telegram
        function updateProfileWithTelegramData(telegramUser) {
            if (telegramUser.first_name) {
                document.getElementById('userName').textContent = telegramUser.first_name;
                // –°–æ–∑–¥–∞–µ–º –∞–≤–∞—Ç–∞—Ä –∏–∑ –ø–µ—Ä–≤–æ–π –±—É–∫–≤—ã –∏–º–µ–Ω–∏
                const firstLetter = telegramUser.first_name.charAt(0).toUpperCase();
                document.getElementById('userAvatar').textContent = firstLetter;
            }
            
            if (telegramUser.id) {
                document.getElementById('userId').textContent = telegramUser.id;
            }
        }

        // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø—Ä–æ—Ñ–∏–ª—è
        function sendProfileViewEvent() {
            const telegramUser = JSON.parse(localStorage.getItem('telegramUser') || '{}');
            const profileData = {
                action: 'profile_viewed',
                user: telegramUser,
                timestamp: new Date().toISOString(),
                section: 'wallet' // —Ç–µ–∫—É—â–∏–π –∞–∫—Ç–∏–≤–Ω—ã–π —Ä–∞–∑–¥–µ–ª
            };
            
            sendDataToBot(profileData);
        }

        // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏—è —Å–º–µ–Ω—ã —Ä–∞–∑–¥–µ–ª–∞
        function sendSectionChangeEvent(sectionName) {
            const telegramUser = JSON.parse(localStorage.getItem('telegramUser') || '{}');
            const sectionData = {
                action: 'profile_section_changed',
                user: telegramUser,
                section: sectionName,
                timestamp: new Date().toISOString()
            };
            
            sendDataToBot(sectionData);
        }

        // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–±—ã—Ç–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞
        function sendWalletConnectEvent() {
            const telegramUser = JSON.parse(localStorage.getItem('telegramUser') || '{}');
            const walletData = {
                action: 'wallet_connected',
                user: telegramUser,
                wallet_address: userData.profile.walletAddress,
                timestamp: new Date().toISOString()
            };
            
            sendDataToBot(walletData);
        }

        // –î–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        const userData = {
            profile: {
                name: "–ì–æ—Å—Ç—å",
                userId: "123456",
                walletBalance: 0,
                gamesPlayed: 0,
                totalSpent: 0,
                totalWon: 0,
                ticketsBought: 0,
                walletConnected: false,
                walletAddress: ""
            },
            transactions: [],
            topPlayers: [],
            myTickets: {}
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ª–∏—á–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞
        function initProfilePage() {
            // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º Telegram
            initTelegram();
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ
            loadUserData();
            updateProfileHeader();
            loadTransactions();
            loadMyTickets();
            loadTopPlayers();
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram
            if (tg && tg.showPopup) {
                setTimeout(() => {
                    tg.showPopup({
                        title: 'üë§ –õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç',
                        message: '–ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ —É–ø—Ä–∞–≤–ª—è—Ç—å –∫–æ—à–µ–ª—å–∫–æ–º –∏ —Å–º–æ—Ç—Ä–µ—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É',
                        buttons: [{ type: 'ok' }]
                    });
                }, 1000);
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function loadUserData() {
            const saved = localStorage.getItem('tonLotteryGameData');
            if (saved) {
                const data = JSON.parse(saved);
                if (data.userProfile) {
                    userData.profile = { ...userData.profile, ...data.userProfile };
                }
                // –ó–∞–≥—Ä—É–∂–∞–µ–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∏–∑ –ø–æ–∫—É–ø–æ–∫
                if (data.pools) {
                    loadPurchaseTransactions(data.pools);
                }
                // –ó–∞–≥—Ä—É–∂–∞–µ–º –±–∏–ª–µ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                if (data.userTickets) {
                    userData.myTickets = data.userTickets;
                }
            }
            
            // –ó–∞–≥—Ä—É–∂–∞–µ–º –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è Telegram
            const telegramUser = JSON.parse(localStorage.getItem('telegramUser') || '{}');
            if (telegramUser.first_name && !userData.profile.name.includes('–ì–æ—Å—Ç—å')) {
                userData.profile.name = telegramUser.first_name;
            }
            if (telegramUser.id) {
                userData.profile.userId = telegramUser.id;
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –±–∏–ª–µ—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function loadMyTickets() {
            const saved = localStorage.getItem('tonLotteryGameData');
            if (saved) {
                const data = JSON.parse(saved);
                if (data.pools) {
                    // –°–æ–±–∏—Ä–∞–µ–º –≤—Å–µ –±–∏–ª–µ—Ç—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ –≤—Å–µ—Ö –ø—É–ª–æ–≤
                    userData.myTickets = {};
                    
                    for (const [poolPrice, pool] of Object.entries(data.pools)) {
                        if (pool.soldTicketsList && pool.soldTicketsList.length > 0) {
                            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—ã–ª–∞ –±—ã –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏ –±–∏–ª–µ—Ç–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
                            // –î–ª—è –¥–µ–º–æ —Å—á–∏—Ç–∞–µ–º, —á—Ç–æ –≤—Å–µ –ø—Ä–æ–¥–∞–Ω–Ω—ã–µ –±–∏–ª–µ—Ç—ã –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç —Ç–µ–∫—É—â–µ–º—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
                            userData.myTickets[poolPrice] = {
                                poolName: pool.name,
                                tickets: [...pool.soldTicketsList].sort((a, b) => a - b)
                            };
                        }
                    }
                }
            }
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –ø–æ–∫—É–ø–æ–∫
        function loadPurchaseTransactions(pools) {
            // –î–æ–±–∞–≤–ª—è–µ–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –ø–æ–∫—É–ø–æ–∫ –∏–∑ –≤—Å–µ—Ö –ø—É–ª–æ–≤
            for (const [poolPrice, pool] of Object.entries(pools)) {
                if (pool.soldTickets > 0) {
                    userData.transactions.unshift({
                        type: 'buy',
                        amount: -pool.soldTickets * pool.price,
                        description: `–ü–æ–∫—É–ø–∫–∞ ${pool.soldTickets} –±–∏–ª–µ—Ç–æ–≤ (${pool.name})`,
                        date: new Date().toLocaleString('ru-RU'),
                        tickets: Array.from({length: pool.soldTickets}, (_, i) => i + 1)
                    });
                }
            }
        }

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function saveUserData() {
            const saved = localStorage.getItem('tonLotteryGameData');
            let data = saved ? JSON.parse(saved) : {};
            data.userProfile = userData.profile;
            data.userTickets = userData.myTickets;
            localStorage.setItem('tonLotteryGameData', JSON.stringify(data));
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Ö–Ω–µ–π —Å—Ç—Ä–æ–∫–∏ –ø—Ä–æ—Ñ–∏–ª—è
        function updateProfileHeader() {
            document.getElementById('userName').textContent = userData.profile.name;
            document.getElementById('userId').textContent = userData.profile.userId;
            document.getElementById('gamesPlayed').textContent = userData.profile.gamesPlayed;
            document.getElementById('walletBalance').textContent = userData.profile.walletBalance;
            document.getElementById('walletBalanceBig').textContent = userData.profile.walletBalance + ' TON';

            // –û–±–Ω–æ–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–æ—à–µ–ª—å–∫–µ
            const walletConnected = document.getElementById('walletConnected');
            const walletDisconnected = document.getElementById('walletDisconnected');
            const walletAddress = document.getElementById('walletAddress');
            
            if (userData.profile.walletConnected) {
                walletConnected.style.display = 'block';
                walletDisconnected.style.display = 'none';
                walletAddress.textContent = userData.profile.walletAddress;
            } else {
                walletConnected.style.display = 'none';
                walletDisconnected.style.display = 'block';
            }

            // –û–±–Ω–æ–≤–ª—è–µ–º —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
            updateStatsSection();
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
        function updateStatsSection() {
            document.getElementById('totalGames').textContent = userData.profile.gamesPlayed;
            document.getElementById('totalSpent').textContent = userData.profile.totalSpent;
            document.getElementById('totalWon').textContent = userData.profile.totalWon;
            document.getElementById('totalTickets').textContent = userData.profile.ticketsBought;
        }

        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–∞ "–ú–æ–∏ –±–∏–ª–µ—Ç—ã"
        function updateMyTicketsSection() {
            const myTicketsList = document.getElementById('myTicketsList');
            myTicketsList.innerHTML = '';

            if (Object.keys(userData.myTickets).length === 0) {
                myTicketsList.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">üé´</div>
                        <div>–£ –≤–∞—Å –ø–æ–∫–∞ –Ω–µ—Ç –∫—É–ø–ª–µ–Ω–Ω—ã—Ö –±–∏–ª–µ—Ç–æ–≤</div>
                        <div style="margin-top: 10px; font-size: 0.9rem;">–ü—Ä–∏–æ–±—Ä–µ—Ç–∏—Ç–µ –±–∏–ª–µ—Ç—ã –≤ —Ä–∞–∑–¥–µ–ª–µ "–ë–∏–ª–µ—Ç—ã"</div>
                    </div>
                `;
                return;
            }

            for (const [poolPrice, poolData] of Object.entries(userData.myTickets)) {
                const poolElement = document.createElement('div');
                poolElement.className = 'tickets-pool';
                
                poolElement.innerHTML = `
                    <div class="pool-header">
                        <div class="pool-title">${poolData.poolName}</div>
                        <div class="ticket-count">${poolData.tickets.length} —à—Ç.</div>
                    </div>
                    <div class="tickets-list" id="ticketsPool${poolPrice}">
                        <!-- –ë–∏–ª–µ—Ç—ã —ç—Ç–æ–≥–æ –ø—É–ª–∞ -->
                    </div>
                `;
                
                myTicketsList.appendChild(poolElement);

                // –ó–∞–ø–æ–ª–Ω—è–µ–º –±–∏–ª–µ—Ç—ã –¥–ª—è —ç—Ç–æ–≥–æ –ø—É–ª–∞
                const ticketsContainer = document.getElementById(`ticketsPool${poolPrice}`);
                poolData.tickets.forEach(ticketNumber => {
                    const ticketElement = document.createElement('div');
                    ticketElement.className = 'my-ticket';
                    ticketElement.textContent = `#${ticketNumber}`;
                    ticketsContainer.appendChild(ticketElement);
                });
            }
        }

        // –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ—à–µ–ª—å–∫–∞
        function connectWallet() {
            if (userData.profile.walletConnected) {
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram
                if (tg && tg.showPopup) {
                    tg.showPopup({
                        title: '‚ÑπÔ∏è –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è',
                        message: '–ö–æ—à–µ–ª–µ–∫ —É–∂–µ –ø–æ–¥–∫–ª—é—á–µ–Ω!',
                        buttons: [{ type: 'ok' }]
                    });
                } else {
                    alert('–ö–æ—à–µ–ª–µ–∫ —É–∂–µ –ø–æ–¥–∫–ª—é—á–µ–Ω!');
                }
                return;
            }

            // –°–∏–º—É–ª—è—Ü–∏—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞
            const walletAddress = 'EQ' + Math.random().toString(36).substr(2, 20).toUpperCase();
            
            userData.profile.walletConnected = true;
            userData.profile.walletAddress = walletAddress;
            
            // –ò—Å–ø–æ–ª—å–∑—É–µ–º –∏–º—è –∏–∑ Telegram –µ—Å–ª–∏ –µ—Å—Ç—å
            const telegramUser = JSON.parse(localStorage.getItem('telegramUser') || '{}');
            if (telegramUser.first_name) {
                userData.profile.name = telegramUser.first_name;
            } else {
                userData.profile.name = '–ò–≥—Ä–æ–∫ #' + Math.floor(Math.random() * 10000);
            }
            
            userData.profile.walletBalance = 50; // –ù–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è
            userData.transactions.unshift({
                type: 'deposit',
                amount: 50,
                description: '–ü–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—á–µ—Ç–∞',
                date: new Date().toLocaleString('ru-RU')
            });
            
            saveUserData();
            updateProfileHeader();
            loadTransactions();
            
            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–±—ã—Ç–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫–æ—à–µ–ª—å–∫–∞
            sendWalletConnectEvent();
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram
            if (tg && tg.showPopup) {
                tg.showPopup({
                    title: '‚úÖ –£—Å–ø–µ—Ö!',
                    message: 'TON –∫–æ—à–µ–ª–µ–∫ —É—Å–ø–µ—à–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω!',
                    buttons: [{ type: 'ok' }]
                });
            } else {
                alert('TON –∫–æ—à–µ–ª–µ–∫ —É—Å–ø–µ—à–Ω–æ –ø–æ–¥–∫–ª—é—á–µ–Ω!');
            }
        }

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–∑–¥–µ–ª–æ–≤
        function showSection(sectionName) {
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏
            document.querySelectorAll('.section-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');

            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –≤—ã–±—Ä–∞–Ω–Ω—ã–π —Ä–∞–∑–¥–µ–ª
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(sectionName + 'Section').classList.add('active');

            // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–±—ã—Ç–∏–µ —Å–º–µ–Ω—ã —Ä–∞–∑–¥–µ–ª–∞
            sendSectionChangeEvent(sectionName);

            // –ï—Å–ª–∏ –ø–µ—Ä–µ—à–ª–∏ –≤ —Ä–∞–∑–¥–µ–ª "–ú–æ–∏ –±–∏–ª–µ—Ç—ã", –æ–±–Ω–æ–≤–ª—è–µ–º –µ–≥–æ
            if (sectionName === 'tickets') {
                loadMyTickets();
                updateMyTicketsSection();
            }
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤–Ω–µ—Å–µ–Ω–∏—è —Å—Ä–µ–¥—Å—Ç–≤
        function showDepositModal() {
            if (!userData.profile.walletConnected) {
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram
                if (tg && tg.showPopup) {
                    tg.showPopup({
                        title: '‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ',
                        message: '–°–Ω–∞—á–∞–ª–∞ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ TON –∫–æ—à–µ–ª–µ–∫!',
                        buttons: [{ type: 'ok' }]
                    });
                } else {
                    alert('–°–Ω–∞—á–∞–ª–∞ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ TON –∫–æ—à–µ–ª–µ–∫!');
                }
                return;
            }
            document.getElementById('depositModal').classList.add('active');
            document.getElementById('depositAddress').textContent = userData.profile.walletAddress;
        }

        // –°–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤–Ω–µ—Å–µ–Ω–∏—è —Å—Ä–µ–¥—Å—Ç–≤
        function hideDepositModal() {
            document.getElementById('depositModal').classList.remove('active');
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–≤–æ–¥–∞ —Å—Ä–µ–¥—Å—Ç–≤
        function showWithdrawModal() {
            if (!userData.profile.walletConnected) {
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram
                if (tg && tg.showPopup) {
                    tg.showPopup({
                        title: '‚ö†Ô∏è –í–Ω–∏–º–∞–Ω–∏–µ',
                        message: '–°–Ω–∞—á–∞–ª–∞ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ TON –∫–æ—à–µ–ª–µ–∫!',
                        buttons: [{ type: 'ok' }]
                    });
                } else {
                    alert('–°–Ω–∞—á–∞–ª–∞ –ø–æ–¥–∫–ª—é—á–∏—Ç–µ TON –∫–æ—à–µ–ª–µ–∫!');
                }
                return;
            }
            document.getElementById('withdrawModal').classList.add('active');
            document.getElementById('availableBalance').textContent = userData.profile.walletBalance + ' TON';
            document.getElementById('withdrawAmount').max = userData.profile.walletBalance;
        }

        // –°–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –≤—ã–≤–æ–¥–∞ —Å—Ä–µ–¥—Å—Ç–≤
        function hideWithdrawModal() {
            document.getElementById('withdrawModal').classList.remove('active');
        }

        // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤–Ω–µ—Å–µ–Ω–∏—è —Å—Ä–µ–¥—Å—Ç–≤
        function confirmDeposit() {
            const depositAddress = userData.profile.walletAddress;
            navigator.clipboard.writeText(depositAddress).then(() => {
                // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram
                if (tg && tg.showPopup) {
                    tg.showPopup({
                        title: 'üìã –°–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–æ',
                        message: '–ê–¥—Ä–µ—Å –¥–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!',
                        buttons: [{ type: 'ok' }]
                    });
                } else {
                    alert('–ê–¥—Ä–µ—Å –¥–ª—è –ø–æ–ø–æ–ª–Ω–µ–Ω–∏—è —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!');
                }
                hideDepositModal();
            });
        }

        // –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤—ã–≤–æ–¥–∞ —Å—Ä–µ–¥—Å—Ç–≤
        function confirmWithdraw() {
            const amount = parseFloat(document.getElementById('withdrawAmount').value);
            const address = document.getElementById('withdrawAddress').value.trim();

            if (!amount || amount <= 0) {
                alert('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é —Å—É–º–º—É –¥–ª—è –≤—ã–≤–æ–¥–∞');
                return;
            }

            if (amount > userData.profile.walletBalance) {
                alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤ –Ω–∞ –±–∞–ª–∞–Ω—Å–µ');
                return;
            }

            if (!address || address.length < 10) {
                alert('–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∞–¥—Ä–µ—Å TON –∫–æ—à–µ–ª—å–∫–∞');
                return;
            }

            // –°–∏–º—É–ª—è—Ü–∏—è –≤—ã–≤–æ–¥–∞
            userData.profile.walletBalance -= amount;
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—é
            userData.transactions.unshift({
                type: 'withdraw',
                amount: -amount,
                description: '–í—ã–≤–æ–¥ —Å—Ä–µ–¥—Å—Ç–≤',
                date: new Date().toLocaleString('ru-RU'),
                address: address
            });

            saveUserData();
            updateProfileHeader();
            loadTransactions();
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ Telegram
            if (tg && tg.showPopup) {
                tg.showPopup({
                    title: '‚úÖ –ó–∞–ø—Ä–æ—Å –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω',
                    message: `–ó–∞–ø—Ä–æ—Å –Ω–∞ –≤—ã–≤–æ–¥ ${amount} TON –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫—É!`,
                    buttons: [{ type: 'ok' }]
                });
            } else {
                alert(`–ó–∞–ø—Ä–æ—Å –Ω–∞ –≤—ã–≤–æ–¥ ${amount} TON –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω!`);
            }
            hideWithdrawModal();
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
        function loadTransactions() {
            const transactionsList = document.getElementById('transactionsList');
            
            if (userData.transactions.length === 0) {
                transactionsList.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">üìä</div>
                        <div>–û–ø–µ—Ä–∞—Ü–∏–π –ø–æ–∫–∞ –Ω–µ—Ç</div>
                    </div>
                `;
                return;
            }

            transactionsList.innerHTML = '';
            userData.transactions.forEach(transaction => {
                const transactionItem = document.createElement('div');
                transactionItem.className = 'transaction-item';
                
                let iconClass, iconSymbol;
                switch(transaction.type) {
                    case 'buy': iconClass = 'icon-buy'; iconSymbol = 'üé´'; break;
                    case 'win': iconClass = 'icon-win'; iconSymbol = 'üèÜ'; break;
                    case 'deposit': iconClass = 'icon-deposit'; iconSymbol = '‚¨áÔ∏è'; break;
                    case 'withdraw': iconClass = 'icon-withdraw'; iconSymbol = '‚¨ÜÔ∏è'; break;
                }
                
                const amountClass = transaction.amount > 0 ? 'amount-positive' : 'amount-negative';
                const amountSign = transaction.amount > 0 ? '+' : '';
                
                transactionItem.innerHTML = `
                    <div class="transaction-info">
                        <div class="transaction-icon ${iconClass}">${iconSymbol}</div>
                        <div class="transaction-details">
                            <h4>${transaction.description}</h4>
                            <p>${transaction.date}</p>
                        </div>
                    </div>
                    <div class="transaction-amount ${amountClass}">
                        ${amountSign}${transaction.amount} TON
                    </div>
                `;
                
                transactionsList.appendChild(transactionItem);
            });
        }

        // –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–æ–ø–∞ –∏–≥—Ä–æ–∫–æ–≤
        function loadTopPlayers() {
            const ratingList = document.getElementById('ratingList');
            
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –¥–µ–º–æ-—Ä–µ–π—Ç–∏–Ω–≥
            userData.topPlayers = [
                { name: '–ö—Ä–∏–ø—Ç–æWolf', amount: 12500, games: 45 },
                { name: 'TON_Investor', amount: 9800, games: 32 },
                { name: 'Lucky777', amount: 7450, games: 28 },
                { name: 'BlockchainPro', amount: 6200, games: 25 },
                { name: 'CryptoQueen', amount: 5800, games: 22 },
                { name: 'DigitalNomad', amount: 4200, games: 18 },
                { name: 'SmartContract', amount: 3800, games: 15 }
            ];

            if (userData.topPlayers.length === 0) {
                ratingList.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">üèÜ</div>
                        <div>–†–µ–π—Ç–∏–Ω–≥ –ø–æ–∫–∞ –ø—É—Å—Ç</div>
                    </div>
                `;
                return;
            }

            ratingList.innerHTML = '';
            userData.topPlayers.forEach((player, index) => {
                const ratingItem = document.createElement('div');
                ratingItem.className = 'rating-item';
                
                const positionClass = index < 3 ? `position-${index + 1}` : '';
                const avatarLetter = player.name.charAt(0);
                
                ratingItem.innerHTML = `
                    <div class="rating-position ${positionClass}">${index + 1}</div>
                    <div class="rating-avatar">${avatarLetter}</div>
                    <div class="rating-info">
                        <div class="rating-name">${player.name}</div>
                        <div class="rating-stats">${player.games} –∏–≥—Ä</div>
                    </div>
                    <div class="rating-amount">${player.amount} TON</div>
                `;
                
                ratingList.appendChild(ratingItem);
            });
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        document.addEventListener('DOMContentLoaded', initProfilePage);
    </script>
 </body>
</html>
